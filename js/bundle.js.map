{"version":3,"sources":["webpack:///webpack/bootstrap e520f0c25f3bbe9823d3","webpack:///./game/main.js","webpack:///./game/dom_node_collection.js","webpack:///./game/ttt-view.js","webpack:///./game/game.js","webpack:///./game/board.js","webpack:///./game/moveError.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA,0BAAyB,YAAY;AACrC,wBAAuB,YAAY;AACnC;AACA;AACA,aAAY;AACZ,qDAAoD;AACpD;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AC3ED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,2BAA0B,EAAE;AAC5B;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,2BAA0B,EAAE;AAC5B;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACxKA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C,sCAAqC,OAAO;AAC5C,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yBAAwB,YAAY;AACpC,2BAA0B,YAAY;AACtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACjEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kCAAiC,mBAAmB;;AAEpD;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB,cAAc;AACvC,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACzEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yBAAwB,YAAY;AACpC,2BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yBAAwB,YAAY;AACpC;AACA,2BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA,oBAAmB,gBAAgB;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAyB,8BAA8B;AACvD;AACA;AACA,2BAA0B,YAAY;AACtC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAmB,OAAO;AAC1B;AACA,sBAAqB,OAAO;AAC5B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;;AC1HA,mCAAkC,gBAAgB;;AAElD;AACA;AACA;;AAEA","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e520f0c25f3bbe9823d3\n **/","const DOMNodeCollection = require('./dom_node_collection.js');\n\nwindow.$l = function(selector) {\n  let arr;\n  let regHTML = /^<|>$>/ ;\n\n  if ( typeof selector === \"function\" ) {\n    document.addEventListener(\"DOMContentLoaded\", selector);\n    return 1; //we don't want to return any collection\n  } else if ( typeof selector === \"string\" && regHTML.test(selector) ) {\n    var d = document.createElement('div');\n    d.innerHTML = selector;\n    arr = [d.firstChild];\n    d = null;\n  } else if (typeof selector === \"string\" ) {\n    arr = Array.from(document.querySelectorAll(selector));\n  } else {\n    return -1;\n  }\n  return new DOMNodeCollection(arr);\n};\n\n$l.extend = function(target, ...sources) {\n  Object.assign(target, ...sources);\n  return target;\n};\n\n$l.ajax = function(obj = {}) {\n  let def = {\n    success: function() {return null},\n    error: function() {return null},\n    url: window.location.href,\n    method: \"GET\",\n    data: {},\n    contentType: 'application/x-www-form-urlencoded; charset=UTF-8'\n  };\n\n  let mergedObj = $l.extend(def, obj);\n\n  const xhr = new XMLHttpRequest();\n\n  xhr.open(mergedObj.method.toUpperCase(), mergedObj.url, true);\n\n  if (xhr.method === \"GET\"){\n    xhr.url += \"?\" + toQueryString(xhr.data);\n  }\n\n  xhr.onload = function (e) {\n    if(xhr.status === 200) {\n      mergedObj.success(xhr.response);\n    } else {\n      mergedObj.error(xhr.response);\n    }\n  };\n\n  xhr.send(JSON.stringify(mergedObj.data));\n};\n\nconst toQueryString = function(obj) {\n  let result = \"\";\n  for(let prop in obj){\n    if (obj.hasOwnProperty(prop)){\n      result += prop + \"=\" + obj[prop] + \"&\";\n    }\n  }\n  return result.substring(0, result.length - 1);\n};\n\nconst View = require('./ttt-view');\nconst Game = require('./game');\n\n$l( () => {\n  const rootEl = $l('.ttt');\n  const game = new Game();\n  new View(game, rootEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/main.js\n ** module id = 0\n ** module chunks = 0\n **/","class DOMNodeCollection {\n  constructor(array) {\n    this.array = array;\n  }\n\n  each(callBack) {\n    if (this.array.length === 0) {\n      return -1;\n    }\n    this.array.forEach(callBack);\n  }\n\n  html(string) {\n    if (string === undefined && this.array.length > 0 ) {\n      return this.array[0].innerHTML;\n    } else if (typeof string === \"string\"){\n      this.each( (el) => {\n        el.innerHTML = string;\n      });\n    } else {\n      return -1;\n    }\n  }\n\n  empty() {\n    this.each( (el ) => {\n      el.innerHTML = \"\";\n    });\n    this.array = [];\n  }\n\n  append(arg) {\n\n    // if (typeof children === 'object' &&\n    //     !(children instanceof DomNodeCollection)) {\n    //   // ensure argument is coerced into DomNodeCollection\n    //   children = $l(children);\n    // }\n\n\n    if (arg instanceof DOMNodeCollection) {\n      arg.each( (child) => {\n        this.each( (el) => {\n          el.appendChild(child.cloneNode(true));\n        });\n      });\n    } else if (arg instanceof HTMLElement){\n      this.each( (el) => {\n        el.appendChild(arg.cloneNode(true));\n      });\n      // arg.parentNode.removeChild(arg);\n    } else if (typeof arg === \"string\"){\n      this.each( (el) => {\n        el.innerHTML += arg;\n      });\n    } else {\n      return -1;\n    }\n  }\n\n  attr(key, value) {\n    if (typeof val === \"string\") {\n      this.each( el => el.setAttribute(key, val) );\n    } else {\n      return this.nodes[0].getAttribute(key);\n    }\n  }\n\n  addClass(newClass){\n    this.each( (el) => {\n      el.classList.add(newClass);\n    });\n  }\n\n  removeClass(oldClass) {\n    this.each( (el) => {\n      el.classList.remove(oldClass);\n    });\n  }\n\n  toggleClass(newClass) {\n    this.array.each( (el) => {\n      el.classList.toggle(oldClass);\n    });\n  }\n\n  children() {\n    let childArr = [];\n    this.each( (child) => {\n      childArr = childArr.concat(Array.from(child.children));\n    });\n    return new DOMNodeCollection(childArr);\n  }\n\n  parents() {\n    let parentArr = [];\n    this.each( (el) => {\n      let parent = el.parentNode;\n      if (!parentArr.includes(parent)) {\n        parentArr.push(parent);\n      }\n    });\n\n    return new DOMNodeCollection(parentArr);\n  }\n\n  find(selector) {\n    let results = [];\n    this.array.each( (el) => {\n      results = results.concat(Array.from(el.querySelectorAll(selector)));\n    });\n    return new DOMNodeCollection(results);\n  }\n\n  remove() {\n    this.each( (el) => {\n      el.parentNode.removeChild(el);\n    });\n\n    this.array = [];\n  }\n\n  on(e, callback) {\n    this.each( (el) => {\n      el.addEventListener(e, callback);\n      const k = `miniJQ-${e}`;\n      if (el[k] === undefined) {\n        el[k] = [];\n      }\n      el[k].push(callback);\n    });\n  }\n\n  off(e) {\n    this.each( (el) => {\n      const k = `miniJQ-${e}`;\n      if (el[k] && el[k].length > 0 ) {\n        el[k].forEach(callback => {\n          el.removeEventListener(e, callback);\n        });\n        el[k] = [];\n      }\n      el[k].push(callback);\n    });\n  }\n\n  data(key, value) {\n    if (value === undefined) {\n      return this[key];\n    } else {\n      this[key] = value;\n    }\n  }\n\n  get(ind) {\n    let el = this.arr[ind];\n    if (el) {\n      return el;\n    } else {\n      return -1;\n    }\n  }\n\n  first() {\n    return this.get(0);\n  }\n}\n\nmodule.exports = DOMNodeCollection;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/dom_node_collection.js\n ** module id = 1\n ** module chunks = 0\n **/","class View {\n  constructor(game, $el) {\n    this.game = game;\n    this.$el = $el;\n\n    this.setupBoard();\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    this.$el.on(\"click\", \"li\", ( event => {\n      const $square = $l(event.currentTarget);\n      this.makeMove($square);\n    }));\n  }\n\n  makeMove($square) {\n    const pos = $square.data(\"pos\");\n    const currentPlayer = this.game.currentPlayer;\n\n    try {\n      this.game.playMove(pos);\n    } catch (e) {\n      alert(\"Invalid move! Try again.\");\n      return;\n    }\n\n    $square.addClass(currentPlayer);\n\n    if (this.game.isOver()) {\n      // cleanup click handlers.\n      this.$el.off(\"click\");\n      this.$el.addClass(\"game-over\");\n\n      const winner = this.game.winner();\n      const $figcaption = $l(\"<figcaption>\");\n\n      if (winner) {\n        this.$el.addClass(`winner-${winner}`);\n        $figcaption.html(`You win, ${winner}!`);\n      } else {\n        $figcaption.html(\"It's a draw!\");\n      }\n\n      this.$el.append($figcaption);\n    }\n  }\n\n  setupBoard() {\n    const $ul = $l(\"<ul>\");\n    $ul.addClass(\"group\");\n\n    for (let rowIdx = 0; rowIdx < 3; rowIdx++) {\n      for (let colIdx = 0; colIdx < 3; colIdx++) {\n        let $li = $l(\"<li>\");\n        $li.data(\"pos\", [rowIdx, colIdx]);\n\n        $ul.append($li);\n      }\n    }\n\n    this.$el.append($ul);\n  }\n}\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/ttt-view.js\n ** module id = 2\n ** module chunks = 0\n **/","const Board = require(\"./board\");\nconst MoveError = require(\"./moveError\");\n\nclass Game {\n  constructor() {\n    this.board = new Board();\n    this.currentPlayer = Board.marks[0];\n  }\n\n  isOver() {\n    return this.board.isOver();\n  }\n\n  playMove(pos) {\n    this.board.placeMark(pos, this.currentPlayer);\n    this.swapTurn();\n  }\n\n  promptMove(reader, callback) {\n    const game = this;\n\n    this.board.print();\n    console.log(`Current Turn: ${this.currentPlayer}`)\n\n    reader.question('Enter rowIdx: ', rowIdxStr => {\n      const rowIdx = parseInt(rowIdxStr);\n      reader.question('Enter colIdx: ', colIdxStr => {\n        const colIdx = parseInt(colIdxStr);\n        callback([rowIdx, colIdx]);\n      });\n    });\n  }\n\n  run(reader, gameCompletionCallback) {\n    this.promptMove(reader, move => {\n      try {\n        this.playMove(move);\n      } catch (e) {\n        if (e instanceof MoveError) {\n          console.log(e.msg);\n        } else {\n          throw e;\n        }\n      }\n\n      if (this.isOver()) {\n        this.board.print();\n        if (this.winner()) {\n          console.log(`${this.winner()} has won!`);\n        } else {\n          console.log('NO ONE WINS!');\n        }\n        gameCompletionCallback();\n      } else {\n        // continue loop\n        this.run(reader, gameCompletionCallback);\n      }\n    });\n  }\n\n  swapTurn() {\n    if (this.currentPlayer === Board.marks[0]) {\n      this.currentPlayer = Board.marks[1];\n    } else {\n      this.currentPlayer = Board.marks[0];\n    }\n  }\n\n  winner() {\n    return this.board.winner();\n  }\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/game.js\n ** module id = 3\n ** module chunks = 0\n **/","const MoveError = require(\"./moveError\");\n\nclass Board {\n  constructor() {\n    this.grid = Board.makeGrid();\n  }\n\n  isEmptyPos(pos) {\n    if (!Board.isValidPos(pos)) {\n      throw new MoveError('Is not valid position!');\n    }\n\n    return (this.grid[pos[0]][pos[1]] === null);\n  }\n\n  isOver() {\n    if (this.winner() != null) {\n      return true;\n    }\n\n    for (let rowIdx = 0; rowIdx < 3; rowIdx++) {\n      for (let colIdx = 0; colIdx < 3; colIdx++) {\n        if (this.isEmptyPos([rowIdx, colIdx])) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  placeMark(pos, mark) {\n    if (!this.isEmptyPos(pos)) {\n      throw new MoveError('Is not an empty position!');\n    }\n\n    this.grid[pos[0]][pos[1]] = mark;\n  }\n\n  print() {\n    const strs = [];\n    for (let rowIdx = 0; rowIdx < 3; rowIdx++) {\n      const marks = [];\n      for (let colIdx = 0; colIdx < 3; colIdx++) {\n        marks.push(\n          this.grid[rowIdx][colIdx] ? this.grid[rowIdx][colIdx] : \" \"\n        );\n      }\n      strs.push(`${marks.join('|')}\\n`);\n    }\n\n    console.log(strs.join('-----\\n'));\n  }\n\n  winner() {\n    const posSeqs = [\n      // horizontals\n      [[0, 0], [0, 1], [0, 2]],\n      [[1, 0], [1, 1], [1, 2]],\n      [[2, 0], [2, 1], [2, 2]],\n      // verticals\n      [[0, 0], [1, 0], [2, 0]],\n      [[0, 1], [1, 1], [2, 1]],\n      [[0, 2], [1, 2], [2, 2]],\n      // diagonals\n      [[0, 0], [1, 1], [2, 2]],\n      [[2, 0], [1, 1], [0, 2]]\n    ];\n\n    for (let i = 0; i < posSeqs.length; i++) {\n      const winner = this.winnerHelper(posSeqs[i]);\n      if (winner != null) {\n        return winner;\n      }\n    }\n\n    return null;\n  }\n\n  winnerHelper(posSeq) {\n    for (let markIdx = 0; markIdx < Board.marks.length; markIdx++) {\n      const targetMark = Board.marks[markIdx];\n      let winner = true;\n      for (let posIdx = 0; posIdx < 3; posIdx++) {\n        const pos = posSeq[posIdx];\n        const mark = this.grid[pos[0]][pos[1]];\n\n        if (mark != targetMark) {\n          winner = false;\n        }\n      }\n\n      if (winner) {\n        return targetMark;\n      }\n    }\n\n    return null;\n  }\n\n  static isValidPos(pos) {\n    return (0 <= pos[0]) &&\n    (pos[0] < 3) &&\n    (0 <= pos[1]) &&\n    (pos[1] < 3);\n  }\n\n  static makeGrid() {\n    const grid = [];\n\n    for (let i = 0; i < 3; i++) {\n      grid.push([]);\n      for (let j = 0; j < 3; j++) {\n        grid[i].push(null);\n      }\n    }\n\n    return grid;\n  }\n}\n\nBoard.marks = ['x', 'o'];\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/board.js\n ** module id = 4\n ** module chunks = 0\n **/","\nconst MoveError = function (msg) { this.msg = msg; };\n\n// MoveError really should be a child class of the built in Error object provided\n// by Javascript, but since we haven't covered inheritance yet, we'll just\n// let it be a vanilla Object for now!\n\nmodule.exports = MoveError;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./game/moveError.js\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}